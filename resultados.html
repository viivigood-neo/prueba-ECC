<!DOCTYPE html>
<html>
<head>
	<title>Resultados</title>

	    <!-- Google Tag Manager -->
    <script>(function (w, d, s, l, i) {
            w[l] = w[l] || []; w[l].push({
                'gtm.start':
                new Date().getTime(), event: 'gtm.js'
            }); var f = d.getElementsByTagName(s)[0],
                j = d.createElement(s), dl = l != 'dataLayer' ? '&l=' + l : ''; j.async = true; j.src =
                    'https://www.googletagmanager.com/gtm.js?id=' + i + dl; f.parentNode.insertBefore(j, f);
        })(window, document, 'script', 'dataLayer', 'GTM-MP7WT9P');</script>
    <!-- End Google Tag Manager -->
	<title>Segunda Pagina iframe</title>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>

</head>
<body>

	  <!-- Google Tag Manager (noscript) -->
    <noscript>
        <iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MP7WT9P" height="0" width="0" style="display:none;visibility:hidden"></iframe>
    </noscript>
    <!-- End Google Tag Manager (noscript) -->


	<h2>RESULTADOS</h2>

	<div id="content"></div>
    <script>
      function hndlr(response) {
      for (var i = 0; i < response.items.length; i++) {
        var item = response.items[i];
        // in production code, item.htmlTitle should have the HTML entities escaped.
        document.getElementById("content").innerHTML += "<br>" + item.htmlTitle;
      }
    }
    </script>
    <script src="https://www.googleapis.com/customsearch/v1?key=YOUR-KEY&cx=017576662512468239146:omuauf_lfve&q=cars&callback=hndlr">
    </script>

    <script>
    	var url = new URL(window.location.href);
		var q = url.searchParams.get("q");
		console.log(q);

		const cx = '001939702519921710925:r3go7yk9ajo' // your search engine id 
	    const apikey = 'AIzaSyBnwNm0UTzO9CreXzKESrGWnJij24XN6V0' // CSE API TEST

	    var url = 'https://www.googleapis.com/customsearch/v1?key='+apikey+'&cx='+cx+'&q='+q;

	    console.log(url);

	    var request = new XMLHttpRequest()

	    request.open('GET', url, true)

		request.onload = function() {
		  // Begin accessing JSON data here
		  var data = JSON.parse(this.response)

		  data.items.forEach(item => {
			  //console.log(item.title)
			  document.getElementById("content").innerHTML += "<br>" + item.htmlTitle;
		  })
		}

		// Send request
		request.send()
    </script>


</body>
</html>